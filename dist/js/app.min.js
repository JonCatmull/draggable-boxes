"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Boxes=function(){function e(t,i,r){_classCallCheck(this,e),this.numberOfBoxes=t,this.boxesPerRow=i,this.boxDimensions=(100/i).toFixed(4),this.targetContainer=r,this.boxesProperties=[{name:"Alpha",color:"#CD6155"},{name:"Bravo",color:"#EC7063"},{name:"Charlie",color:"#AF7AC5"},{name:"Delta",color:"#5499C7"},{name:"Echo",color:"#5DADE2"},{name:"Foxtrot",color:"#48C9B0"},{name:"Golf",color:"#45B39D"},{name:"Hotel",color:"#52BE80"},{name:"Indigo",color:"#58D68D"},{name:"Juliet",color:"#F4D03F"},{name:"Kilo",color:"#F5B041"},{name:"Lima",color:"#DC7633"},{name:"Mike",color:"#F0F3F4"},{name:"November",color:"#CACFD2"},{name:"Oscar",color:"#AAB7B8"},{name:"Papa",color:"#641E16"}],this.initializedPropertiesCounter=0,this.initializedProperties=[],this.boxesOrderCounter=0,this.boxesPlaceholder=[],this.draggingNowBox=null}return _createClass(e,[{key:"init",value:function(){var e=document.createElement("div");e.classList.add("main-draggable-delete");var t=document.createElement("span");t.classList.add("icon","hovered");var i=document.createElement("img");i.src="img/trash.svg";var r=document.createElement("div");r.classList.add("overlay"),e.appendChild(t),e.appendChild(r),t.appendChild(i),this.targetContainer.appendChild(e);for(var o=0;o<this.numberOfBoxes;o++){var n=document.createElement("div");n.classList.add("main-draggable-box"),n.style.width="calc("+this.boxDimensions+"% - 20px)",n.style.height="calc("+this.boxDimensions+"% - 20px)",n.setAttribute("data-order",this.boxesOrderCounter),n.style.backgroundColor=this.boxesProperties[this.initializedPropertiesCounter].color,n.innerHTML="<p>"+this.boxesProperties[this.initializedPropertiesCounter].name+"</p>",n.setAttribute("data-name",this.boxesProperties[this.initializedPropertiesCounter].name),this.initializedProperties.push(this.boxesProperties[this.initializedPropertiesCounter].name),this.initializedPropertiesCounter++,this.boxesOrderCounter++,this.boxesPlaceholder.push(n),this.targetContainer.appendChild(n),n.style.width=n.getBoundingClientRect().width-1.5+"px",n.style.height=n.getBoundingClientRect().height-1.5+"px"}this.addDraggable()}},{key:"addDraggable",value:function(){function e(e){var o=e.target;o.classList.contains("main-draggable-box")&&1===e.which&&((r=o.cloneNode(!0)).classList.add("dragged"),o.classList.add("dragging-now"),i.draggingNowBox=o,r.style.position="absolute",r.style.width=o.getBoundingClientRect().width+"px",r.style.height=o.getBoundingClientRect().height+"px",i.targetContainer.appendChild(r),i.targetContainer.querySelector(".main-draggable-delete").style.display="block",window.addEventListener("mousemove",t,!0))}function t(e){if(null!=i.draggingNowBox&&null!=r){var t=i.targetContainer.querySelectorAll(".main-draggable-box");r.style.top=e.clientY-r.getBoundingClientRect().height/1.5+"px",r.style.left=e.clientX-r.getBoundingClientRect().width/2+"px",document.elementFromPoint(e.clientX,e.clientY)==document.querySelector(".main-draggable-delete .overlay")?(document.querySelector(".main-draggable-delete .icon").classList.add("hovered"),r.classList.add("delete")):(document.querySelector(".main-draggable-delete .icon").classList.remove("hovered"),r.classList.remove("delete"));for(var n=0;n<t.length;n++){var a=t[n],s=a.getBoundingClientRect(),l=r.getBoundingClientRect();s.top+s.height/3<=l.bottom&&s.bottom+s.height/3>=l.top&&s.left+s.width/3<=l.right&&s.right+s.width/3>=l.left&&!1===a.classList.contains("dragged")&&(o=n,i.targetContainer.insertBefore(i.draggingNowBox,a.nextSibling),i.reorderBoxes(0))}}}var i=this,r=null,o=null;window.addEventListener("mousedown",e,!1),window.addEventListener("mouseup",function(o){var n=o;null!=r&&r.classList.contains("dragged")&&1===o.which&&i.targetContainer.contains(r)&&(i.targetContainer.removeChild(r),i.draggingNowBox.classList.remove("dragging-now"),document.querySelector(".main-draggable-delete").style.display="none",null!=i.draggingNowBox&&n.target.classList.contains("overlay")?(i.draggingNowBox.classList.add("deleted"),i.boxesPlaceholder.splice(parseInt(i.draggingNowBox.getAttribute("data-order")),1),i.initializedProperties.splice(parseInt(i.draggingNowBox.getAttribute("data-order")),1),i.initializedPropertiesCounter--,i.draggingNowBox=null,i.boxesOrderCounter--,setTimeout(function(){document.querySelector(".deleted").remove(),i.reorderBoxes(0)},301)):null!=i.draggingNowBox&&n.target.classList.contains("main-draggable-box")?i.reorderBoxes(0):(r=null,i.draggingNowBox=null)),window.removeEventListener("mousemove",t,!0),window.removeEventListener("mousedown",e,!0)},!0)}},{key:"reorderBoxes",value:function(e){var t=e;this.initializedProperties=[];for(var i=this.targetContainer.querySelectorAll(".main-draggable-box"),r=e;r<i.length;r++){var o=i[r];0===t?o.setAttribute("data-order",r):o.setAttribute("data-order",parseInt(o.getAttribute("data-order"))-1)}for(var n=0;n<i.length;n++){var a=i[n];this.initializedProperties.push(a.getAttribute("data-name"))}}},{key:"addBox",value:function(){var e=document.createElement("div");e.classList.add("main-draggable-box"),e.style.width="calc("+this.boxDimensions+"% - 20px)",e.style.height="calc("+this.boxDimensions+"% - 20px)",e.setAttribute("data-order",this.boxesOrderCounter);for(var t=0;t<this.boxesProperties.length;t++)if(-1==this.initializedProperties.indexOf(this.boxesProperties[t].name)){this.boxesPlaceholder.push(e),e.setAttribute("data-name",this.boxesProperties[t].name),e.style.backgroundColor=this.boxesProperties[t].color,e.innerHTML="<p>"+this.boxesProperties[t].name+"</p>",this.initializedPropertiesCounter++,this.boxesOrderCounter++,this.targetContainer.appendChild(e),this.reorderBoxes(0);break}}},{key:"shuffleBoxes",value:function(){this.shuffler(this.boxesPlaceholder,this.initializedProperties);for(var e=this.targetContainer.children.length-1;e>=0;e--)this.targetContainer.children[e].classList.contains("main-draggable-box")&&(this.targetContainer.children[e].classList.add("deleted"),0===e&&this.targetContainer.children[e].getBoundingClientRect.width);var t=this,i=document.querySelectorAll(".deleted");setTimeout(function(){for(var e=0;e<i.length;e++)i[e].remove();for(var r=0;r<t.boxesPlaceholder.length;r++)t.targetContainer.appendChild(t.boxesPlaceholder[r]),t.boxesPlaceholder[r].setAttribute("data-order",r),t.boxesPlaceholder[r].classList.remove("deleted"),t.reorderBoxes(0)},300)}},{key:"shuffler",value:function(e,t){for(var i,r,o,n=e.length,a=t.length;a;i=parseInt(Math.random()*n),r=e[--n],e[n]=e[i],e[i]=r,o=t[--a],t[a]=t[i],t[i]=o);}}]),e}(),draggableContainer=document.getElementById("main-draggable"),boxes=new Boxes(12,4,draggableContainer,"200px");boxes.init(),document.getElementById("add-new-boxes").addEventListener("click",function(){boxes.addBox()},!1),document.getElementById("shuffle-boxes").addEventListener("click",function(){boxes.shuffleBoxes()},!1);
//# sourceMappingURL=app.min.js.map
